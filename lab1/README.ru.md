[![en](https://img.shields.io/badge/lang-en-blue.svg)](README.md)
[![made-with-python](https://img.shields.io/badge/Made%20with-Python-1f425f.svg)](https://www.python.org/)
[![GitHub license](https://badgen.net/github/license/Naereen/Strapdown.js)](https://github.com/italian/simple_automatic_machine_learning_pipeline/blob/main/LICENSE)

# Простой автоматический конвейер машинного обучения на bash

Это реализация простого конвейера для автоматизации работы с моделью машинного обучения на bash.

Разработана в рамках учебного задания и включает в себя несколько ключевых этапов.

## Этапы

### 1. Создание данных

Скрипт [data_creation.py](python_scripts/data_creation.py) генерирует различные наборы данных о температуре, включая аномалии и шумы, и сохраняет их в папках `train` и `test`. Данные генерируются с использованием библиотеки `numpy` и сохраняются в формате `CSV`.

### 2. Предобработка данных

Скрипт [model_preprocessing.py](python_scripts/model_preprocessing.py) выполняет стандартизацию данных с помощью `sklearn.preprocessing.StandardScaler`. Это необходимо для обеспечения стабильности обучения модели.

### 3. Обучение модели

Скрипт [model_preparation.py](python_scripts/model_preparation.py) создает и обучает модель машинного обучения на данных из папки `train`. В качестве модели используется логистическая регрессия из библиотеки `sklearn`. После обучения модель сохраняется в формате `.pkl` для дальнейшего использования.

### 4. Тестирование модели

Скрипт [model_testing.py](python_scripts/model_testing.py) проверяет производительность обученной модели на данных из папки `test`. Для оценки производительности используются метрики `accuracy`, `precision`, `recall`, `F1-score`.

### 5. Автоматизация конвейера

Bash-скрипт [pipeline.sh](pipeline.sh) позволяет запустить весь конвейер автоматически, последовательно запуская все python-скрипты. Скрипт также создает виртуальную среду и устанавливает необходимые зависимости из файла `requirements.txt`.

## Использование

Для запуска конвейера, клонируйте репозиторий и выполните команду `./pipeline.sh` в терминале.

### Параметры

- **Опциональный параметр**: Количество наборов данных для создания. По умолчанию создается один набор данных.

Примеры использования:

- Запуск скрипта без параметров (создается один набор данных):
    ```shell
    ./pipeline.sh
    ```
- Запуск скрипта с указанием количества наборов данных (например, 5 наборов):
    ```shell
    ./pipeline.sh 5
    ```

Убедитесь, что у вас установлены все необходимые зависимости, указанные в файле [requirements.txt](./requirements.txt).

### Пример вывода
```
Virtual environment '.venv' is activated.
All dependencies are already installed.

The model for the data set 1 is trained.
 Accuracy  Precision  Recall  F1-score
 0.950909   0.925926     0.5  0.649351
--------------------

The model for dataset 1 is tested.
 Accuracy  Precision  Recall  F1-score
 0.954545        1.0     0.5  0.666667
--------------------
```

## Требования

- Python 3.7+
- Библиотеки:
    - numpy,
    - pandas,
    - sklearn

## Возможные проблемы и способы их решения

- **Проблема с активацией виртуальной среды в `pipeline.sh`**: Использование в скрипте [pipeline.sh](pipeline.sh) внутри функции `activate_venv` переменной `$VIRTUAL_ENV` для проверки активации виртуальной среды может быть ненадежным в некоторых случаях, например, когда скрипт запускается внутри сессии `tmux` или `screen`, созданной в активированной виртуальной среде. В таких случаях `$VIRTUAL_ENV` может оставаться установленным, даже если виртуальная среда не активна в текущем контексте.
    - **Возможное решение**: Использовать другие методы для проверки активации виртуальной среды или избегать использования виртуальных сред в таких сценариях.

## Улучшения

- **Добавление поддержки других моделей машинного обучения**: В текущей реализации используется только логистическая регрессия. Добавление поддержки других моделей, таких как деревья решений или нейронные сети, может расширить возможности проекта.
- **Интеграция с системами CI/CD**: Интеграция с системами непрерывной интеграции и непрерывной доставки (CI/CD) может автоматизировать процесс тестирования и развертывания модели, улучшая процесс разработки.

## Лицензия

Этот проект распространяется под лицензией MIT.